
---

## ğŸ” Problem: Longest Subarray with Sum K

Given an array `arr[]` and an integer `k`, return the **length of the longest subarray** with sum exactly `k`.
If no such subarray exists, return `0`.

---

## ğŸ’¡ Approach: Prefix Sum + `unordered_map`

We'll use a hash map (`unordered_map`) to store the **first occurrence** of each `prefix_sum` so we can check in constant time if a valid subarray exists.

---

## ğŸ‘¨â€ğŸ’» Code

```cpp
#include <unordered_map>
#include <vector>
using namespace std;

class Solution {
  public:
    int longestSubarray(vector<int>& arr, int k) {
        unordered_map<int, int> prefix_sum;  // ğŸ§  prefix_sum -> first index
        int curr_sum = 0;     // ğŸ”¢ Keeps the running total
        int longest = 0;      // ğŸ“ Tracks longest subarray found

        for (int i = 0; i < arr.size(); i++) {
            curr_sum += arr[i];  // â• Update prefix sum

            // ğŸ¯ Case 1: Entire subarray from index 0 to i has sum == k
            if (curr_sum == k)
                longest = i + 1;

            // ğŸ¯ Case 2: Found subarray from some previous index + 1 to i
            if (prefix_sum.find(curr_sum - k) != prefix_sum.end()) {
                int prev_index = prefix_sum[curr_sum - k];
                longest = max(longest, i - prev_index);  // ğŸ“ Update if longer
            }

            // ğŸ›‘ Store the first occurrence of the prefix_sum
            if (prefix_sum.find(curr_sum) == prefix_sum.end()) {
                prefix_sum[curr_sum] = i;
            }
        }

        return longest;  // ğŸ‰ Return the final longest length
    }
};
```

---

## ğŸ§ª Dry Run 1

### ğŸ§¾ Input:

```cpp
arr = [10, 5, 2, 7, 1, -10], k = 15
```

### ğŸ§  Step-by-step:

| i | arr\[i] | curr\_sum | curr\_sum-k | Found?  | longest |
| - | ------- | --------- | ----------- | ------- | ------- |
| 0 | 10      | 10        | -5          | âŒ       | 0       |
| 1 | 5       | 15        | 0           | âŒ       | 2 âœ…     |
| 2 | 2       | 17        | 2           | âŒ       | 2       |
| 3 | 7       | 24        | 9           | âŒ       | 2       |
| 4 | 1       | 25        | 10          | âœ… (i=0) | 4 âœ…     |
| 5 | -10     | 15        | 0           | âŒ       | 6 âœ…âœ…    |

ğŸ‘‰ **Answer:** `6`

---

## ğŸ§ª Dry Run 2

### ğŸ§¾ Input:

```cpp
arr = [-5, 8, -14, 2, 4, 12], k = -5
```

| i | arr\[i] | curr\_sum | curr\_sum-k | Found? | longest |
| - | ------- | --------- | ----------- | ------ | ------- |
| 0 | -5      | -5        | 0           | âŒ      | 1 âœ…     |
| 1 | 8       | 3         | 8           | âŒ      | 1       |
| 2 | -14     | -11       | -6          | âŒ      | 1       |
| 3 | 2       | -9        | -4          | âŒ      | 1       |
| 4 | 4       | -5        | 0           | âŒ      | 5 âœ…âœ…    |
| 5 | 12      | 7         | 12          | âŒ      | 5       |

ğŸ‘‰ **Answer:** `5`

---

## ğŸ§ª Dry Run 3

### ğŸ§¾ Input:

```cpp
arr = [10, -10, 20, 30], k = 5
```

* We never find `curr_sum - k` in the map. ğŸ˜
  ğŸ‘‰ **Answer:** `0`

---

## ğŸ§  Time & Space Complexity

| Metric                | Value  |
| --------------------- | ------ |
| â±ï¸ Time               | `O(n)` |
| ğŸ§  Space              | `O(n)` |
| ğŸ¯ Handles Negatives? | âœ… Yes  |

---


